
# Система генерации мелодий для пробуждения

## Обзор

Система генерации мелодий добавляет в приложение возможность динамически создавать приятные мелодии для пробуждения. Вместо воспроизведения заранее записанных аудиофайлов, система генерирует уникальную мелодию каждый раз, когда срабатывает будильник или таймер.

## Как это работает

Система использует Web Audio API для создания аудио в реальном времени. Она состоит из нескольких компонентов:

1. **Генератор мелодий** (`melody_generator.js`) - основной модуль, который координирует процесс генерации
2. **Гаммы** (`scales.js`) - содержит определения музыкальных гамм и аккордов
3. **Паттерны** (`patterns.js`) - содержит паттерны для генерации мелодий, гармонии и баса
4. **Проигрыватель** (`player.js`) - отвечает за воспроизведение сгенерированных мелодий
5. **Интеграция** (`integration.js`) - интегрирует систему генерации мелодий в основной проект

## Особенности

- **Адаптивность**: Мелодии адаптируются под время суток (утром - более бодрые, вечером - более спокойные)
- **Разнообразие**: Каждая мелодия уникальна благодаря случайным элементам в генерации
- **Музыкальность**: Мелодии создаются с использованием музыкальных теорий, включая гармонии и аккорды
- **Настраиваемость**: Можно настроить настроение, темп и длительность мелодий

## Использование

Система автоматически интегрирована в приложение и работает в фоновом режиме. Когда срабатывает будильник или таймер:

1. С вероятностью 70% генерируется новая мелодия
2. В остальных случаях воспроизводится один из существующих аудиофайлов

Мелодия генерируется на основе:
- Времени суток (определяет настроение)
- Случайной музыкальной гаммы
- Случайного паттерна мелодии
- Случайного темпа (80-120 BPM)

## Технические детали

Система генерирует три музыкальных слоя:
1. **Мелодия** - основная музыкальная линия
2. **Гармония** - аккорды, поддерживающие мелодию
3. **Бас** - низкочастотная линия, создающая ритмическую основу

Каждый слой использует свой тип звука:
- Мелодия: синусоидальная волна (мягкий, приятный звук)
- Гармония: треугольная волна (более богатый звук)
- Бас: пилообразная волна (насыщенный низкочастотный звук)

## Совместимость

Система требует поддержки Web Audio API, которая доступна во всех современных браузерах:
- Chrome 14+
- Firefox 23+
- Safari 6+
- Edge 12+

## Дальнейшее развитие

Возможные направления развития системы:
- Добавление большего количества музыкальных паттернов
- Внедрение системы обучения на основе предпочтений пользователя
- Добавление возможности сохранения понравившихся мелодий
- Создание более сложных музыкальных структур
